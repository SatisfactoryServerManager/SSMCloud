(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
function main(){if(toastr.options.closeButton=!0,toastr.options.closeMethod="fadeOut",toastr.options.closeDuration=300,toastr.options.closeEasing="swing",toastr.options.showEasing="swing",toastr.options.timeOut=3e4,toastr.options.extendedTimeOut=1e4,toastr.options.progressBar=!0,toastr.options.positionClass="toast-bottom-right",$(".circle").each((t,e)=>{const a=$(e);console.log(a);const n=a.attr("data-percent");a.circleProgress({startAngle:-Math.PI/4*2,value:n/100,size:150,lineCap:"round",emptyFill:"rgba(255, 255, 255, .1)",fill:{color:"#ffa500"}}).on("circle-animation-progress",function(t,e,a){$(this).find("strong").text(`${(100*a.toFixed(2)).toFixed(0)}%`)})}),$("#agents-table").length>0&&$("#agents-table").DataTable(),$(".backup-agent-table").length>0&&$(".backup-agent-table").DataTable({order:[[1,"desc"]]}),$(".saves-table").length>0&&$(".saves-table").DataTable({order:[[2,"desc"]]}),$("#users-table").length>0&&($("#users-table").DataTable(),$("#roles-table").DataTable(),$("#invites-table").DataTable(),$("#apikeys-table").DataTable(),$("#webhooks-table").DataTable()),$(".mods-table").length>0&&$(".mods-table").DataTable(),$("body").on("change","#inp_servermemory",t=>{const e=$(t.currentTarget);$("#inp_servermemory_value").text(`${parseFloat(e.val()).toFixed(1)}G`),BuildAgentInstallCommands()}).on("change","#inp_servername",t=>{BuildAgentInstallCommands()}).on("change","#inp_serverport",t=>{BuildAgentInstallCommands()}).on("click",".should-confirm-btn",t=>{t.preventDefault();const e=$(t.currentTarget);window.openModal("/public/modals","server-action-confirm",t=>{t.find(".modal-title").text(e.attr("data-confirm-title"));const a=t.find("#confirm-action");a.attr("data-href",e.attr("href")),a.attr("data-action",e.attr("data-action"))})}).on("click","#server-action-confirm #cancel-action",t=>{$("#server-action-confirm .btn-close").trigger("click")}).on("click","#server-action-confirm #confirm-action",t=>{const e=$(t.currentTarget);window.location=e.attr("data-href"),$("#server-action-confirm .btn-close").trigger("click")}).on("change",".inp_modid",t=>{const e=$(t.currentTarget),a=e.parent().parent().find(".inp_modversion"),n=e.val();let o=null;try{o=JSON.parse(localStorage.getItem("mods"))}catch(t){}if(o){let t=null;for(let e=0;e<o.mods.length;e++){const a=o.mods[e];if(a.modId==n){t=a;break}}if(t){a.empty(),a.append('<option value="">Select Version</option>');for(let e=0;e<t.versions.length;e++){const n=t.versions[e];a.append(`<option value="${n.version}">${n.version}</option>`)}}}}),$("#inp_maxplayers").on("input change",()=>{const t=$("#inp_maxplayers").val();$("#max-players-value").text(`${t} / 500`)}),$("#inp_maxplayers").length>0){const t=$("#inp_maxplayers").val();$("#max-players-value").text(`${t} / 500`)}$("#inp_servername").length>0&&BuildAgentInstallCommands();[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(t){return new bootstrap.Tooltip(t)})}function OpenCreateServerModal(){window.openModal("/public/modals","create-server-modal",t=>{})}function BuildAgentInstallCommands(){const t=$("#inp_servername").val();if(""==t)return $("#windows-install-agent span").text("PLEASE PROVIDE A SERVER NAME!"),void $("#linux-install-agent span").text("PLEASE PROVIDE A SERVER NAME!");const e=1024*parseFloat($("#inp_servermemory").val())*1024*1024,a=parseFloat($("#inp_serverport").val())-15777,n=15777+a,o=15e3+a,l=7777+a;let r=`.\\install-agent.ps1 -AGENTNAME "SSMAgent_${t}" -MEMORY ${e}`,s=`.\\install-agent-standalone.ps1 -AGENTNAME "SSMAgent_${t}"`,i=`bash install-agent.sh --name "SSMAgent_${t}" --memory ${e}`,c=`bash install-agent-standalone.sh --name "SSMAgent_${t}"`;a>0&&(r+=` -SERVERQUERYPORT ${n}`,r+=` -BEACONPORT ${o}`,r+=` -PORT ${l}`,i+=` --serverqueryport ${n}`,i+=` --beaconport ${o}`,i+=` --port ${l}`),s+=` -PORTOFFSET ${a}`,c+=` --portoffset ${a}`,$("#windows-install-agent .docker span").text(r),$("#windows-install-agent .standalone span").text(s),$("#linux-install-agent .docker span").text(i),$("#linux-install-agent .standalone span").text(c)}window.openModal=function(t,e,a,n){let o={allowBackdropRemoval:!0},l=null;3==arguments.length?l=a:4==arguments.length&&(o=a,l=n),$("body").hasClass("modal-open")||$.ajax({url:t+"/"+e+".html",success:function(t){$("body").append(t);var a=$("#"+e);a.find("button.close").on("click",t=>{t.preventDefault();const e=$(t.currentTarget).parent().parent().parent().parent();e.remove(),e.trigger("hidden.bs.modal"),e.modal("hide"),$("body").removeClass("modal-open").attr("style",null),$(".modal-backdrop").remove()}),a.on("hidden.bs.modal",()=>{$(this).remove(),$('[name^="__privateStripe"]').remove(),1==o.allowBackdropRemoval&&$(".modal-backdrop").remove()}),a.modal("show"),l&&l(a)},dataType:"html"})},$(document).ready(()=>{main()});

},{}]},{},[1]);
