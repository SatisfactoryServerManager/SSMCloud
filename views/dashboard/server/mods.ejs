<%
        const modState = agent.modState;
        const installedModsCount = modState.selectedMods.filter(m=>m.installed).length;

        function truncate(str, n){
            return (str.length > n) ? str.slice(0, n-1) + '...' : str;
          };
      %>
<div class="row">
  <div class="col-12 col-lg-3">
    <%-include('../../includes/status-info-card.ejs',{ClassColour:"blue",
            ClassID:"status",Title:"SML Version",
            Data:"v"+modState.installedSMLVersion,Icon:"fa-wrench"}) %>
  </div>
  <div class="col-0 col-lg-6"></div>
  <div class="col-12 col-lg-3">
    <%-include('../../includes/status-info-card.ejs',{ClassColour:"green",
            ClassID:"status",Title:"Installed Mods",
            Data:installedModsCount,Icon:"fa-pencil-ruler"}) %>
  </div>
</div>




<div class="card border-secondary mb-3 bg-glass bg-glass-blue">
  <div class="card-header">
    <h5>Mods</h5>
  </div>
  <div class="card-body">
    <input type="hidden" id="_csrf" name="_csrf" value="<%= csrfToken %>" />
    <label class="form-label">Select Mods from Mod Manager Profile</label>
    <input type="file" class="form-control smm-metadata-file" name="">
    <hr>
    <label for="" class="form-label">Search Mod List:</label>
    <div class="input-group">
      <input type="text" class="form-control mod-search" name="" id="">
      <button class="btn btn-primary"><i class="fas fa-search"></i></button>
    </div>

    <div class="mod-list mt-2">
      <div class="row">
        <%mods.forEach(mod=>{%>

        <%
        const selectedMod = modState.selectedMods.find(m=>m.mod.modName == mod.modName)
        const isInstalled = selectedMod != null && selectedMod.installed;
        %>

        <%-include('../../includes/mod-card.ejs', {mod, selectedMod, isInstalled})%>

        <%})%>
      </div>
    </div>
  </div>
</div>


<script>
  let mods = <%- JSON.stringify(mods) %>;
  localStorage.setItem('mods', JSON.stringify({
    'mods': mods
  }));
</script>